{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{102:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"frontMatter\",(function(){return i})),n.d(t,\"metadata\",(function(){return o})),n.d(t,\"rightToc\",(function(){return l})),n.d(t,\"default\",(function(){return p}));var r=n(1),a=n(6),s=(n(0),n(176)),i={id:\"user-settings-profile-management\",title:\"User Settings and Profile Management\"},o={id:\"self-service/flows/user-settings-profile-management\",title:\"User Settings and Profile Management\",description:\"ORY Kratos allows users to update their own settings and profile information\",source:\"@site/docs/self-service/flows/user-settings-profile-management.md\",permalink:\"/kratos/docs/next/self-service/flows/user-settings-profile-management\",editUrl:\"https://github.com/ory/kratos/edit/master/docs/docs/self-service/flows/user-settings-profile-management.md\",version:\"next\",lastUpdatedBy:\"\\u597d\\u98ce\",lastUpdatedAt:1586254904,sidebar:\"docs\",previous:{title:\"User Logout\",permalink:\"/kratos/docs/next/self-service/flows/user-logout\"},next:{title:\"Account Recovery\",permalink:\"/kratos/docs/next/self-service/flows/password-reset-account-recovery\"}},l=[{value:\"Self-Service User Profile Management for Browser Applications\",id:\"self-service-user-profile-management-for-browser-applications\",children:[{value:\"Server-Side Browser Applications\",id:\"server-side-browser-applications\",children:[]},{value:\"Client-Side Browser Applications\",id:\"client-side-browser-applications\",children:[]}]},{value:\"Self-Service User Profile Management for API Clients\",id:\"self-service-user-profile-management-for-api-clients\",children:[]}],c={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,[\"components\"]);return Object(s.b)(\"wrapper\",Object(r.a)({},c,n,{components:t,mdxType:\"MDXLayout\"}),Object(s.b)(\"p\",null,\"ORY Kratos allows users to update their own settings and profile information\\nusing two principal flows:\"),Object(s.b)(\"ul\",null,Object(s.b)(\"li\",{parentName:\"ul\"},\"Browser-based (easy): This flow works for all applications running on top of a\\nbrowser. Websites, single-page apps, Cordova/Ionic, and so on.\"),Object(s.b)(\"li\",{parentName:\"ul\"},\"API-based (advanced): This flow works for native applications like iOS\\n(Swift), Android (Java), Microsoft (.NET), React Native, Electron, and others.\")),Object(s.b)(\"p\",null,\"This flow does not allow updates of security-sensitive information such as the\\npassword, fields associated with login (e.g. email), fields associated with\\naccount recovery (e.g. recovery email address). These fields must be updated\\nusing a separate flow which requires prior security checks.\"),Object(s.b)(\"p\",null,\"The updated profile must be valid against the JSON Schema defined for its\\n\",Object(s.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"/kratos/docs/next/concepts/identity-user-model\"}),\"Identity Traits\"),'. If one or more fields\\ndo not validate (e.g. \"Not an email\"), the profile will not be updated.'),Object(s.b)(\"p\",null,\"The only required configuration is setting the Profile UI URL in the\\n\",Object(s.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"/kratos/docs/next/reference/configuration\"}),\"ORY Kratos configuration file\"),\":\"),Object(s.b)(\"pre\",null,Object(s.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-yaml\"}),\"urls:\\n  settings_ui: https://.../..\\n\")),Object(s.b)(\"h2\",{id:\"self-service-user-profile-management-for-browser-applications\"},\"Self-Service User Profile Management for Browser Applications\"),Object(s.b)(\"p\",null,\"This flow is similar to\\n\",Object(s.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"/kratos/docs/next/self-service/flows/user-login-user-registration\"}),\"User Login and User Registration\"),\" but does not\\nsupport before/after work flows or individual strategies. It uses the already\\nestablished \",Object(s.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"/kratos/docs/next/self-service/flows/index#network-flows-for-browsers\"}),\"Network Flows for Browsers\"),\".\"),Object(s.b)(\"h3\",{id:\"server-side-browser-applications\"},\"Server-Side Browser Applications\"),Object(s.b)(\"p\",null,\"The \",Object(s.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"/kratos/docs/next/self-service/flows/index#network-flows-for-browsers\"}),\"Network Flows for Browsers\"),\" works as\\nfollows for Profile Management:\"),Object(s.b)(\"ol\",null,Object(s.b)(\"li\",{parentName:\"ol\"},\"An initial HTTP Request is made to\\n\",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"https://example.org/.ory/kratos/public/self-service/browser/flows/settings\"),\".\"),Object(s.b)(\"li\",{parentName:\"ol\"},\"ORY Kratos redirects the browser to the URL set in \",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"urls.settings_ui\"),\" and\\nappends the \",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"request\"),\" URL Query Parameter (e.g.\\n\",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"https://example.org/settings?request=abcde\"),\").\"),Object(s.b)(\"li\",{parentName:\"ol\"},\"The Endpoint at \",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"/settings\"),\" makes a HTTP GET Request to\\n\",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"https://ory-kratos-admin.example-org.vpc/self-service/browser/flows/requests/settings?request=abcde\"),\"\\nand fetches Profile Management Request JSON Payload that represent the\\nindividual fields that can be updated.\"),Object(s.b)(\"li\",{parentName:\"ol\"},\"The User updates the profile data and sends a HTTP POST request to, e.g.,\\n\",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"https://example.org/.ory/kratos/public/self-service/browser/flows/settings/strategies/password?request=abcde\"),\".\",Object(s.b)(\"ul\",{parentName:\"li\"},Object(s.b)(\"li\",{parentName:\"ul\"},\"If the profile data is invalid, all validation errors will be collected and\\nadded to the Profile Management JSON Payload. The Browser is redirected to\\nthe \",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"urls.settings_ui\"),\" URL (e.g.\\n\",Object(s.b)(\"inlineCode\",{parentName:\"li\"},\"https://example.org/profile?request=abcde\"),\").\"),Object(s.b)(\"li\",{parentName:\"ul\"},\"If the profile data is valid, the identity's traits are updated and the\\nprocess is complete.\")))),Object(s.b)(\"p\",null,\"Assuming the Identity's Traits JSON Schema is defined as\"),Object(s.b)(\"pre\",null,Object(s.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-json\"}),'{\\n  \"$id\": \"https://example.org/identity.traits.schema.json\",\\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\\n  \"title\": \"Person\",\\n  \"type\": \"object\",\\n  \"properties\": {\\n    \"email\": {\\n      \"type\": \"string\",\\n      \"format\": \"email\",\\n      \"title\": \"E-Mail\",\\n      \"minLength\": 3,\\n      \"ory.sh/kratos\": {\\n        \"credentials\": {\\n          \"password\": {\\n            \"identifier\": true\\n          }\\n        }\\n      }\\n    },\\n    \"name\": {\\n      \"type\": \"object\",\\n      \"properties\": {\\n        \"first\": {\\n          \"type\": \"string\",\\n          \"minLength\": 5\\n        },\\n        \"last\": {\\n          \"type\": \"string\"\\n        }\\n      }\\n    }\\n  },\\n  \"required\": [\"email\"],\\n  \"additionalProperties\": false\\n}\\n')),Object(s.b)(\"p\",null,\"the resulting JSON Payload coming from\\n\",Object(s.b)(\"inlineCode\",{parentName:\"p\"},\"https://ory-kratos-admin.example-org.vpc/self-service/browser/flows/requests/settings?request=abcde\"),\"\\nwould look something along the lines of:\"),Object(s.b)(\"pre\",null,Object(s.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-json\"}),'{\\n  \"id\": \"48068b5d-3438-4d6f-9955-331b96c41762\",\\n  \"expires_at\": \"2020-01-27T23:03:58.5986947Z\",\\n  \"issued_at\": \"2020-01-27T22:03:58.5987099Z\",\\n  \"request_url\": \"http://127.0.0.1:4455/settings\",\\n  \"form\": {\\n    \"action\": \"https://example.org/.ory/kratos/public/settings?48068b5d-3438-4d6f-9955-331b96c41762\",\\n    \"method\": \"POST\",\\n    \"fields\": {\\n      \"csrf_token\": {\\n        \"name\": \"csrf_token\",\\n        \"type\": \"hidden\",\\n        \"required\": true,\\n        \"value\": \"+5+WxP7+leOpfjHHkWWe99APD7845i82p4wGtfdWKHBK5fFg4BS7JjzdeI7kdsOUElyrG10ZR5vIqi7asNpqAA==\"\\n      },\\n      \"traits.email\": {\\n        \"name\": \"traits.email\",\\n        \"type\": \"text\",\\n        \"value\": \"foobar@ory.sh\"\\n      },\\n      \"traits.name.first\": {\\n        \"name\": \"traits.name.first\",\\n        \"type\": \"text\",\\n        \"value\": \"Foobar\"\\n      },\\n      \"traits.name.last\": {\\n        \"name\": \"traits.name.last\",\\n        \"type\": \"text\",\\n        \"value\": \"Barbaz\"\\n      }\\n    }\\n  },\\n  \"identity\": {\\n    \"id\": \"c631e58a-445a-4844-ae80-f0b426a1e11e\",\\n    \"traits_schema_id\": \"default\",\\n    \"traits_schema_url\": \"https://example.org/identity.traits.schema.json\",\\n    \"traits\": {\\n      \"email\": \"foobar@ory.sh\",\\n      \"name\": {\\n        \"last\": \"Foobar\",\\n        \"first\": \"Barbaz\"\\n      }\\n    }\\n  }\\n}\\n')),Object(s.b)(\"p\",null,\"If the user tries to save profile data that does not validate against the\\nprovided JSON Schema, error payloads will be added to the fields affected:\"),Object(s.b)(\"pre\",null,Object(s.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-json5\"}),\"{\\n  id: '48068b5d-3438-4d6f-9955-331b96c41762',\\n  // ...\\n  form: {\\n    // ...\\n    fields: {\\n      // ...\\n      'traits.name.first': {\\n        name: 'traits.name.first',\\n        type: 'text',\\n        value: 'abc',\\n        errors: [\\n          {\\n            message: 'traits.name.first: Must be at least 5 characters long',\\n          },\\n        ],\\n      },\\n      // ...\\n    },\\n  },\\n  // ...\\n}\\n\")),Object(s.b)(\"p\",null,\"Keep in mind that it is not possible to update the \",Object(s.b)(\"inlineCode\",{parentName:\"p\"},\"traits.email\"),\" field as\\nupdating that field requires prior authentication.\"),Object(s.b)(\"blockquote\",null,Object(s.b)(\"p\",{parentName:\"blockquote\"},'Updating these \"protected\" fields will be implemented in a future release of\\nORY Kratos.')),Object(s.b)(\"h3\",{id:\"client-side-browser-applications\"},\"Client-Side Browser Applications\"),Object(s.b)(\"p\",null,\"Because Client-Side Browser Applications do not have access to ORY Kratos' Admin\\nAPI, they must use the ORY Kratos Public API instead. The flow for a Client-Side\\nBrowser Application is almost the exact same as the one for Server-Side\\nApplications, with the small difference that\\n\",Object(s.b)(\"inlineCode\",{parentName:\"p\"},\"https://example.org/.ory/kratos/public/self-service/browser/flows/requests/settings?request=abcde\"),\"\\nwould be called via AJAX instead of making a request to\\n\",Object(s.b)(\"inlineCode\",{parentName:\"p\"},\"https://ory-kratos-admin.example-org.vpc/self-service/browser/flows/requests/settings?request=abcde\"),\".\"),Object(s.b)(\"blockquote\",null,Object(s.b)(\"p\",{parentName:\"blockquote\"},\"To prevent brute force, guessing, session injection, and other attacks, it is\\nrequired that cookies are working for this endpoint. The cookie set in the\\ninitial HTTP request made to \",Object(s.b)(\"inlineCode\",{parentName:\"p\"},\"https://example.org/.ory/kratos/public/settings\"),\"\\nMUST be set and available when calling this endpoint!\")),Object(s.b)(\"h2\",{id:\"self-service-user-profile-management-for-api-clients\"},\"Self-Service User Profile Management for API Clients\"),Object(s.b)(\"p\",null,\"Will be addressed in a future release.\"))}p.isMDXComponent=!0},176:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return d})),n.d(t,\"b\",(function(){return u}));var r=n(0),a=n.n(r);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n=\"function\"==typeof e?e(t):o({},t,{},e)),n},d=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:\"code\",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},f=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,c=l(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),d=p(n),f=r,u=d[\"\".concat(i,\".\").concat(f)]||d[f]||b[f]||s;return n?a.a.createElement(u,o({ref:t},c,{components:n})):a.a.createElement(u,o({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if(\"string\"==typeof e||r){var s=n.length,i=new Array(s);i[0]=f;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType=\"string\"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}f.displayName=\"MDXCreateElement\"}}]);","extractedComments":[]}